\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage[swedish]{babel}
\usepackage{tocloft}
\usepackage{etoolbox}
\usepackage{graphicx}
\graphicspath{ {images/} }

\usepackage{url}
\usepackage{listings}
%\usepackage{showframe}
%\usepackage[a4paper]{geometry}
\usepackage{fancyhdr}
\pagestyle{fancy}
\lhead{Grupp 7}

\rhead{\today}
\cfoot{\thepage}

\renewcommand{\contentsname}{Innehåll}

\textheight = 600pt
\footskip = 30pt


\makeatletter
\@addtoreset{section}{part}
\makeatother

\renewcommand\cftpartpresnum{Del~}


\begin{document}
\pagenumbering{roman}

\begin{titlepage}
\begin{center}
  \textbf{\Huge Kandidatarbete}
\end{center}
\begin{center}
  {\Large Redaktör: Pål Kastman}
\end{center}
\begin{center}
  {\Large Datum: 2015-04-20}
\end{center}
\begin{center}
  {\Large \textbf{Version 0.2}}
\end{center}
\end{titlepage}
\newpage
\begin{flushleft}
  {\Large \textbf{Dokumenthistorik}}\\[0.5ex]
  \begin{center}
    \begin{tabular}{ | l | l | p{5cm} | l |}
    \hline
    \textbf{Datum} & \textbf{Version} & \textbf{Utförda ändringar} & \textbf{Utförda av} \\ \hline
    2015-03-13 & 0.1 & Första utkast av gemensam och individuella rapporter & Pål Kastman \\ \hline
    2015-04-20 & 0.2 & Andra utkastet av gemensam och individuella rapporter & Alla \\ \hline
    \end{tabular}
  \end{center}
\end{flushleft}

\hfill

\begin{flushleft}
  {\Large \textbf{Projektidentitet}}\\[0.5ex]
  {\small} Detta dokument gäller för grupp 7  i kursen TDDD77 på Linköpings universitet
  \begin{center}
    \begin{tabular}{ | l | l | p{5cm} | l |}
    \hline
    \textbf{Namn} & \textbf{Ansvarsområde} & \textbf{E-post} \\ \hline
    Daniel Rapp & Teamledare & danth407@student.liu.se \\ \hline
    Daniel Falk & Analysansvarig & danfa519@student.liu.se \\ \hline
    Jonas Andersson & Arkitekt & jonan111@student.liu.se \\ \hline
    Albert Karlsson & Kvalitetssamordnare & albka735@student.liu.se \\ \hline
    Erik Malmberg & Testledare & erima694@student.liu.se \\ \hline
    Pål Kastman & Dokumentansvarig & palka285@student.liu.se \\ \hline
    \end{tabular}
\end{center}
\end{flushleft}

\begin{flushleft}
\textbf{Kund} \\ Region Östergötland \\
\end{flushleft}
\begin{flushleft}
\textbf{Kundkontakt} \\ 
Daniel Hall, daniel.hall@regionostergotland.se \\
Erik Sundvall, erik.sundvall@regionostergotland.se \\
Ingrid Hallander, ingrid.hallander@regionostergotland.se \\
\end{flushleft}
\begin{flushleft}
\textbf{Handledare} \\ Lena Buffoni, lena.buffoni@liu.se \\
\end{flushleft}
\begin{flushleft}
\textbf{Handledare} \\ Kristian Sandahl, kristian.sandahl@liu.se \\
\end{flushleft}

\newpage
\tableofcontents
\newpage
\pagenumbering{arabic}

\part{Gemensamma erfarenheter och diskussion}

\section{Inledning}
Detta avsnitt behandlar varför detta projekt utförs.
\subsection{Motivering}

Region Östergötland har idag ett system med handböcker som en sjuksköterska går igenom inför varje operation. I dessa handböcker finns bland annat förberedelse-uppgifter och plocklistor. Handböckerna är idag inte interaktiva på något sätt, istället skrivs plocklistan och förberedelse\-uppgifterna ut och bockas av för hand. Plattformen med handböcker kan heller inte återanvändas på olika avdelningar på grund utav licensproblem. Utöver detta system så finns ett annat separat system, som heter kartoteket, för uppgifter om vilka artiklar som finns och var i lagret de ligger. Detta gör att personalen som ska förbereda inför operationer behöver gå in i två olika system om de inte vet var alla artiklar ligger.\\*

\subsection{Syfte}
Uppgiften som gruppen har fått är att skapa ett nytt system med handböcker som har interaktiva förberedelse-och plocklistor. Listorna ska uppdateras kontinuerligt när de bockas av så flera personer kan jobba på dem samtidigt. Plocklistan ska också innehålla uppgifter om var artiklarna ligger. Tanken är att personalen 
ska använda en iPad för listorna så de kan gå runt och plocka i lagret och bocka av samtidigt. \\*
I mån av tid ska också extra funktionalitet implementeras. Till exempel sortera plocklistan med avseende på närmsta väg mellan artiklarna, lagersaldo och media i handböckerna. \\*
Hela systemet ska ligga under en open-source licens så det kan användas fritt av alla.    
\subsection{Frågeställning}
Rapporten ska besvara följande frågeställningar.
\begin{itemize}
\item Hur kan ett system för operationsförberedelser realiseras så arbetet blir lättare och mer effektivt?
\item Kan man använda plattformen keystone för att bygga detta system?
 
\end{itemize}

\subsection{Avgränsningar}
Kunden ville till en början att vi skulle integrera ett lagersaldo i systemet och göra det möjligt att scanna av artiklar 
varefter man tar dessa. Vidare ville kunden även att systemet skulle fungera som ett större system så att alla kliniker i 
regionen skulle vara anslutna.

Vi kände att tiden inte skulle räcka till för att åtadkomma dessa implementeringar och klargjorde därför för 
kunden i ett tidigt skede att vi hellre ville få klart grunden i systemet, så att de skulle få ett likvärdigt men ändå till viss del 
förbättrat system.

En kompromiss gjordes där vi valde ett ge dessa krav prioritet 2 vilket innebar att kraven var önskvärda och skulle implementeras 
i mån av tid, eller prioritet 3 där kraven sågs som en framtida utbyggnad.

\section{Bakgrund}
Studenterna som studerar kursen TDDD77 fick i januari 2015 ett uppdrag att utföra ett kandidatarbete. Först fick gruppen rangordna flera projektdirektiv för att sedan få ett av dessa uppdrag tilldelat sig. Grupp 7 fick då projektet operationsförberedelser som skickades in av Region Östergötland.

\subsection{Programspråk och bibliotek}
I detta projekt kommer följande programspråk och bibliotek att användas.

\subsubsection{Node.js}
Node.js är en plattform för att skapa applikationer till framförallt webbservrar. Det finns en inbyggd pakethanterare vid namn npm som gör det enkelt att inkludera både små och stora bibliotek i sina projekt. Det är därför väldigt enkelt att använda sig av ett bibliotek istället för att skriva all funktionalitet själv.

\subsubsection{Keystone.js}
Keystone.js är ett så kallat ''content management system'' som bland annat innehåller ett kraftfullt administrationsverktyg och en databashanterare.

\subsubsection{Socket.IO}
Socket.IO är en modul till Node.JS. Socket.IO använder sig av websockets för att kommunicera mellan front-end och back-end. Med hjälp av socket.IO så kan man skicka data från en klient till alla andra anslutna klienter och visa datan som skickades utan att någon sida behöver laddas om.
Socket.IO har olika komponenter för front-end och back-end. Händelser som skickas från den ena sidan hanteras av motsvarande händelsehanterare på den andra sidan. Varje händelse identifieras med hjälp av en sträng. Det finns några färdiga händelser i socket.io exempelvis händelsen "connection" på serversidan fås då en klient har anslutit till socket.io.

\subsubsection{MongoDB}
MongoDB är en NOSql dokumentbaserad databas som stödjer stödjer många olika plattformar.

\subsubsection{Handlebars}
Handlebars är ett så kallat ''template language'' som är byggt från Mustache. Handlebars ger bland annat möjlighet till att lägga in mindre logik i html kod samt att från html filer komma åt variabler som finns definierade i javascript filer.

\subsubsection{REST}

\subsubsection{Wkhtmltopdf} 
Wkhtmltopdf är ett program som tar en hemsida eller en html-fil och skapar en pdf av den. Programmet har många olika parametrar som kan ändras t.ex. mediatyp så pdf-filen kan se ut som en utskrift av hemsidan. För att kunna använda detta programmet med Node.js finns det också en Node.js-modul med samma namn som skickar kommandon till programmet.


\section{Teori}

\section{Metod}
I detta avsnitt beskrivs det hur arbetet med projektet har gått till.
\subsection{Kravinsamling}

%Gruppen utgick ifrån ett projektdirektiv och började tänka över hur systemet skulle byggas. En introduktion till projektet gavs också vid ett första möte med kund. Under detta möte bestämdes också hur insamlingen av krav skulle gå till. Analysansvarig utsågs som ansvarig för detta. Denne skulle med hjälp av kunden arbeta fram en kravspecifikation som båda parter vara nöjda med. Detta gjordes genom flera möten och ett gemensamt dokument på Google drive där båda parter kunde gå in för att redigera och skriva kommentarer. Det kom fram ganska snabbt att ingen i gruppen hade koll på hur operationsförberedelser går till, vilket gjorde att utbildning inom detta krävdes. För att få mer insyn så gjordes ett studiebesök på universitetssjukhuset i Linköping.

Denna del beskriver hur kravframställningen gått till i detta projekt. Först beskrivs arbetet med att analysera kundens behov under förstudien. Vidare beskrivs hur kravspecifikationen arbetades fram och hur kraven valdes att representeras. Avslutningsvis beskrivs hur kraven validerades. I en enskild utredning(referera) så beskrivs mer ingående vilka metoder och verktyg som använts för att ta fram krav. Fokus ligger där på prototyper och användartester.

\subsubsection{Förstudie}
Den största delen utav analysarbetet skedde under förstudien. Här identifierades de olika intressenterna och en kravspecifikation utarbetades. Våran första kontakt med projektet var en projektbeskrivning där kunden formulerade sina mål och visioner av projektet. Några vikta krav gavs också såsom att prototypdesign skulle genomföras i samarbete med kunden. Ett första möte utav fyra under förstudien gav sedan mer information och vi började våran kravinsamling. Vi kunde konstatera att vi hade två olika intressenter att arbeta med. Dels sjuksköterskorna som är användare av systemet och dels CMIT, Centrum för medicinsk teknik och IT, som ansvarar för sjukhusets IT-miljöer. För att förstå användarnas behov hölls ett studiebesök där vi fick en visning av nuvarande system och hur det används. Detta var nödvändigt för att verkligen förstå vad det var som behövde göras och vad som kunde förbättras. Från CMIT:s sida hölls mer tekniska möten där teknikval diskuterades. Här var det viktigt att ta reda på vilka begränsningar som fanns och vilka val som passade våra och deras erfarenheter.
\subsubsection{Google docs}
Kravspecifikationen skrevs i Google docs. Detta valdes eftersom kraven utarbetades tillsammans med kund. Ett gemensamt redigerbart dokument gav en möjlighet för oss att arbeta på olika platser under kravframställningen vilket var effektivt. En kommentarsfunktion gav oss möjligheten att kommentera krav och föreslå förbättringar. Under interna möten och kundmöten var den gemensamma redigeringen också till nytta då kravformuleringar snabbt kunde genomföras.
\subsubsection{Kravrepresentation}
Kraven gavs en prioritetsordning för att kunna urskilja de mest väsentliga kraven. Detta kändes nödvändigt då vi var begränsade av en tidsbudget. En prioritering av kraven gav utrymme för vidareutveckling i mån av tid. Krav med prioritet 1 var att betrakta som grundkrav som skulle genomföras för att projektet skulle ses som godkänt. Krav med prioritet 2 var att betrakta som önskvärda och som skulle genomföras om då grundkraven var genomförda. Krav med prioritet 3 var krav som fångats upp med som skulle ses som framtida utbyggnad. 
%Koppla till nån litteratur/standard.

%Strukturering av krav
Kraven numrerades för att lätt kunna refereras till under projektets gång. De delades också in i olika sektioner efter deras del i systemet. Sektionerna var plocklistor, handböcker, kartotek, lagersystem. En extra sektion för generella krav användes. Denna uppdelning kändes naturlig för detta projekt. 
%Man skulle också kunna dela in dem efter blablabla...

Kravspecifikationen skrevs med stöd från standarden IEEE 830. Enligt standarden ska ett krav vara korrekt, otvetydigt, färdigt, konsekvent, prioriterat, verifierbart, modifierbart och spårbart. Detta eftersträvades men det kan diskuteras om alla krav passerar dessa filter. I slutändan var det ändå våran gemensamma förståelse för kravet tillsammans med kunden som accepterades. 

Enligt standarden uttrycktes kraven på ska-form. Ett exempel på ett krav från projektet är följande: "Plocklistor ska innehålla information om artikelns namn, förråd, sektion, hylla och fack".
\subsubsection{Kravvalidering}
Vid varje iterationsslut hölls ett möte med kund där vi demonstrerade nya features och lät kunden testa systemet. Iterationerna gjorde att vi snabbt kunde rätta till eventuella missförstånd. Vi gick igenom vilka krav som var genomförda och vilka som skulle prioriteras till nästa iteration. Kravspecifikationen var på så sett dynamisk och uppdaterades under projektets gång. En färgkodning användes för att markera vilka krav som var godkända, vilka som hade påbörjats och vilka som återstod.

\subsection{Utvecklingsmetod}
Projektet har utvecklats iterativt med en utvecklingsmetodik som påminner mycket om SCRUM. Aktiviteterna i projektet har visats på en gemensam SCRUM-board med hjälp av webbsidan Trello. Boarden hade kategorierna TODO, DOING och DONE. När en medlem valt en aktivitet så märktes aktiviteten med medlemens namn och flyttades till den aktuella kategorin. Varje vecka har gruppen haft ett kort SCRUM-möte på 15 minuter. På mötet har varje gruppmedlem berättat vad som har gjorts den föregående veckan och vad som ska göras nästa vecka. SCRUM-mötet har oftast utförts i samband med varje veckas handledarmöte.

Ett system med alpha state cards har använts för att gruppen ska kunna veta hur långt projektet har fortskridit. Korten har även använts till att identifiera aspekter av projektet som kan förbättras och som gruppen behöver arbeta mer med. De aspekter av projektet som kunnat förbättras har använts som mål för kommande iterationer. De olika korten har uppdaterats kontinuerligt under projektets gång.

Nästan all utveckling har skett med hela gruppen samlad i samma lokal. Det har gjort att alla frågor om andra gruppmedlemmars kod har kunnat besvaratas snabbt. Det har gjort att arbetet kunnat hålla hög fart och att inga onödiga förseningar har uppstått på grund av osäkerheter i hur en del av koden fungerar. Problem har också kunnat lösas fort eftersom alla gruppmedlemmars olika kompetens har funnits tillgänglig.

\subsection{Forskningsmetod}


\clearpage
\input{results.tex}
\clearpage

\section{Diskussion}

\subsection{Resultat}

\subsection{Metod}

\subsection{Arbetet i ett vidare sammanhang}

\section{Slutsatser}
   
\section{Fortsatt arbete}
Här följer en sammanfattning om fortsatt arbete med systemet. Restlistan behandlar krav som inte implementerats eller som borde vidareutvecklas. Även förslag på vidareutveckling som inte tas upp av kravspecifikationen tas upp. Dessa förslag är sådant som kommit fram under utvecklingens gång.

\subsection{Restlista}
Följande krav är markerade som gula i kravspecifikationen vilket betyder att de bör vidareutvecklas för att ses som klara:
%%Fyll på gula krav här efter iteration 3 mötet
Följande krav är markerade som röda i kravspecifikationen vilket betyder att de inte är påbörjade:
%%Fyll på röda krav här efter iteration 3 mötet
Alla krav som behandlar lagersystemet finns kvar:
\begin{description}
\item[Krav nr 46] Ska finnas ett saldo för varje artikel i förrådet.
\item[Krav nr 47] Ska gå att skanna av artiklar (streckkod) som plockas i en specifik plocklista.
\item[Krav nr 48] Ska gå att lagra in en artikel till förrådet som inte blivit använd genom att skanna in den.
\item[Krav nr 49] Saldot ska kunna användas som underlag till beställning.
\item[Krav nr 50] Beställningsunderlaget ska ha ett sådant format att det går att importera i Agresso.
\item[Krav nr 51] En inventeringsfunktion ska finnas.
\end{description}

Övriga förslag på vidareutveckling:
%%Fyll på här om ni kommer på något!
\begin{description}
\item[Artikelsök] Vid sökning på artikel vid redigering av handbok kan det vara bra om man sorterar resultaten så att de artiklar som tillhör samma enhet som handboken visas först.
\item[Avancerad sökfunktion] En mer avancerad sökfunktion med * och söknining på flera ord som inte behöver vara direkt efter varandra.
\item[Förvalda kommentarer] Under användartester observerades att samma kommentarer skrivs ofta så det kan vara bra med en lista på vanliga kommentarer som man kan välja ifrån.
\item[Roller och rättigheter] Olika roller bör identifieras och en funktion för att tilldela användare olika rättigheter bör implementeras.
\end{description}


\newpage
\part{Enskilda utredningar}
\renewcommand{\thesection}{\Alph{section}}	
\input{enskilda/rapp.tex}
\newpage
\input{enskilda/jonas.tex}
\newpage
\input{enskilda/pal.tex}
\newpage
\input{enskilda/falk.tex}
\newpage
\input{enskilda/erik.tex}
\newpage
\input{enskilda/robin.tex}
\newpage
\input{enskilda/albert.tex}



\end{document}
